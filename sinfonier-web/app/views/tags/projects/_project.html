<div id="project-${_project.getId()}" data-id="${_project.getId()}"
     class="#{if _size == "small"} col-lg-6 col-md-6 col-sm-6 col-xs-12 #{/if} #{else } col-lg-12 #{/else} project project">
  <div class="panel panel-default">


    <div class="panel-body">
      <div class="row">
        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
          <h2 class="title inline pull-left">
          #{if _size == "small"}
            <img id="project-${_project?.getId()}-img-type" class="icon-xs"
                 src="/public/images/icons/${_project?.getType()}.png" alt="Project icon by type">
          #{/if}
            <a id="project-${_project?.getId()}-a-title" href="@{Projects.show(_project?.getName())}" class="btn btn-link"
               style="font-size: 20px;">${_project?.getName()}</a>
          #{if _size != "small" }
            <i class="fa fa-rocket" aria-hidden="true"></i>
          #{/if}
          </h2>         
        </div>
        #{if !_project?.getName().equals(_currentProject?.getName()) && _project.getStatus().equals(models.SinfonierConstants.Project.STATUS_ACTIVE)  }
	        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
	          <a id="project-${_project?.getId()}-button-use" data-id="${_project?.getId()}" href="#" class="btn btn-success btn-inline js-project-use">               
	           &{'Projects.btn.use'}
	          </a>
	        </div>
        #{/if}
      </div>

    #{if _size != "small"}
      <div class="row">
        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
          <p id="project-${_project?.getId()}-p-status"><span class="bold">&{'Projects.form.status'}:</span> &{'Projects.form.status.'+_project?.getStatus()}
          </p>
        </div>
      </div>
    #{/if}


      <!-- DESCRIPTION -->
      <div class="row">
        <div class="col-lg-12">
          <span class="bold">&{'Projects.form.description'}:</span>
          <pre id="project-${_project?.getId()}-p-description" class="project-desc">${_project.getDescription()}</pre>
        </div>
      </div>

      <!-- SOME DETAILS -->
      <div class="row details-section">
        <div class="col-lg-12">
          <div class="well">
            <p id="project-${_project.getId()}-p-createBy" class="details">
            #{if session.username && controllers.Secure.Security.invoke("check", "USER_READ_PROFILES")}
              &{'Modules.index.create_by', _project.getAuthor()?.getEmail()?.escapeHtml()?.raw(), _project.getAuthor()?.getName()?.escapeHtml()?.raw(), _project.getAuthor()?.getEmail()?.escapeHtml()?.raw(), _project.getCreatedAt()?.format(play.Play.configuration.getProperty("date.format"))}
            #{/if}
            #{else}
              &{'Modules.index.create_by_text', _project.getAuthor()?.getName()?.escapeHtml()?.raw(), _project.getCreatedAt()?.format(play.Play.configuration.getProperty("date.format"))}
            #{/else}
            </p>
          </div>
        </div>
      </div>

      <!-- BUTTONS -->
    #{if _size == "large"}
      <div class="row form-group">
          #{if _project.hasWritePermission(_wc?.getCurrentUser())}
            <!-- DELETE -->
              #{if !_project?.getName().equals(_currentProject?.getName()) && _project.getStatus().equals(models.SinfonierConstants.Project.STATUS_ACTIVE)}
                <div class="col-xs-12 col-sm-2">
                  <button id="project-${_project?.getId()}-button-delete" class="btn btn-danger" type="button"
                          data-toggle="modal" data-target="#confirmModal-${_project?.getId()}">
                  &{'Projects.btn.delete'}
                  </button>
                </div>
              #{/if}
            <!-- EDIT -->
            <div class="col-xs-12 col-sm-2">
              <a id="project-${_project?.getId()}-button-edit" href="@{Projects.edit(_project?.getName())}" class="btn btn-success">	              
	             &{'Projects.btn.edit'}
              </a>
            </div>
          #{/if}
      </div>
    #{/if}
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="confirmModal-${_project?.getId()}" tabindex="-1" role="dialog" aria-labelledby="confirmModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">&{'Projects.details.delete.title'}</h4>
      </div>
      <div class="modal-body">
      &{'Projects.details.delete.text', _project?.getName()}
      </div>
      <div class="modal-footer">
      #{form @Projects.delete(_project.getId()), method:'POST', id:'delete-' + _project.getId()}
        <button id="project-${_project.getId()}-button-deleteCancel" type="button" class="btn btn-default btn-modal"
                data-dismiss="modal">&{'Modules.btn.cancel'}</button>
        <button id="project-${_project.getId()}-button-deleteOK" type="submit" class="btn btn-cancel btn-modal">
        &{'Projects.btn.delete'}</button>
      #{/form}
      </div>
    </div>
  </div>
</div>
